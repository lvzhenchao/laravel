try{document.domain="dangdang.com"}catch(err){}var DDCART={shop_domain:"shoppingcart.dangdang.com",checkout_direct_buy:"http://checkout.dangdang.com/dbuy/checkout_dbuy.aspx?shop_id=0&product_id=",DDCART_PAGE_TIP_ID:"DDCART_PAGE_TIP_OBJ",DDCART_PAGE_TIP_IFREAME_ID:"DDCART_PAGE_TIP_IFREAME_OBJ",ADD_WISHLIST_API:"http://wish.dangdang.com/wishlist/remote_addtofavorlist.aspx",parentOBJId:""};DDCART.getPosXY=function(c){if(typeof c!="object"){return{x:0,y:0}}var b=c;var a=0,d=0;while(b){a=a+b.offsetLeft;d=d+b.offsetTop;b=b.offsetParent}return{x:a,y:d}};DDCART.creatElem=function(a){return document.createElement(a)};DDCART.append=function(d,c){if(typeof c=="string"){d.innerHTML+=c}else{d.appendChild(c)}};DDCART.ADDCartWin=function(v,i,o,g,h,s){var l="";var a="";if(ddclick_page_tracker){if(ddclick_page_tracker.referer){l=ddclick_page_tracker.referer}if(ddclick_page_tracker.prev_referer){a=ddclick_page_tracker.prev_referer}}var d=this.DDCART_PAGE_TIP_ID,b=this.DDCART_PAGE_TIP_IFREAME_ID;var t="";var m=0;if(typeof g=="object"){if(g.is_add){m=g.is_add}if(g.dd_refer){t=g.dd_refer}}this.parentOBJId=i.id;var e=this.getPosXY(i);var k=null,q=null;k=document.getElementById(d);if(!k){k=document.createElement("DIV");k.id=d;k.setAttribute("name",d);k.style.backgroundColor="#fff";k.style.zIndex=10000;k.style.display="none";k.style.position="absolute";this.append(document.body,k)}var f=document.getElementById(d).getElementsByTagName("IFRAME");if(f.length==0){var p=document.createElement("IFRAME");p.id=b;p.setAttribute("name",b);p.src="";p.scrolling="no";p.frameBorder=0;p.allowTransparency=true;p.style.width="320px";this.append(k,p);f=document.getElementById(d).getElementsByTagName("IFRAME")}q=f[0];var n=Math.random();var u="";if((typeof h!="function")&&typeof h==="string"){u=h}else{u=s}u=u===undefined?"":u;var j="http://"+this.shop_domain+"/shoppingcart/addtocart.php?product_ids="+v+"&add_promotion="+u+"&referer="+l+"&prev_referer="+a+"&is_add=0&r="+n+"#dd_refer="+t;q.src=j;if(!isNaN(o.x)){e.x+=o.x}if(!isNaN(o.y)){e.y+=o.y}k.style.top=e.y+"px";k.style.left=e.x+"px";if(typeof h=="function"){var c=Array.prototype.slice.call(arguments,5);h(c)}};DDCART.ADDCartConfirm=function(){var a=this.DDCART_PAGE_TIP_IFREAME_ID;var c=document.getElementById(a);var d=c.src;var b=Math.random();d=d.replace(/r=([\d\.]+)/g,"r="+b);d=d.replace(/is_add=0/g,"is_add=1");c.src=d};DDCART.direct_buy=function(a,b){this.closeWin();window.location.href=this.checkout_direct_buy+a+"."+b};DDCART.resizeMsgBox=function(){var j=this.DDCART_PAGE_TIP_ID,f=this.DDCART_PAGE_TIP_IFREAME_ID;var k=window.parent;var b=k.document.getElementById(f);k.document.getElementById(j).style.display="block";var a=null;b.style.height=null;b.style.width=null;if(!navigator.userAgent.toUpperCase().indexOf("MSIE")){for(var d=0;d<window.frames.length;d++){try{if(window.frames[d].name==f){a=window.frames[d].document}}catch(g){}}}else{a=window.frames[f].document}b.style.width=a.documentElement.scrollWidth+"px";var c=0,h=0;if(a.documentElement.scrollHeight>a.body.scrollHeight){h=a.documentElement.scrollHeight;c=a.body.scrollHeight}else{c=a.documentElement.scrollHeight;h=a.body.scrollHeight}if(c==0){b.style.height=h+"px"}else{b.style.height=c+"px"}};DDCART.GoToCART=function(){this.closeWin();var a=window.open("http://"+this.shop_domain+"/shoppingcart/shopping_cart.aspx","shoppingcart");a.focus()};DDCART.closeWin=function(){var d=this.DDCART_PAGE_TIP_ID,a=this.DDCART_PAGE_TIP_IFREAME_ID;var b=window.parent;var c=b.document.getElementById(d);c.style.display="none"};DDCART.ADDTOWISHLIST=function(j){var k=this.DDCART_PAGE_TIP_ID,g=this.DDCART_PAGE_TIP_IFREAME_ID,f=this.ADD_WISHLIST_API;var l=window.parent;var c=l.document.getElementById(k);var b=null;if(!navigator.userAgent.toUpperCase().indexOf("MSIE")){for(var d=0;d<window.frames.length;d++){try{if(window.frames[d].name==g){b=window.frames[d].document}}catch(h){}}}else{b=window.frames[g].document}var a=[];var m=b.getElementsByTagName("INPUT");for(var d=0;d<m.length;d++){if(m[d].name=="wishlist[]"){if(j=="checkbox"&&m[d].checked==false){continue}a[a.length]=m[d].value}}if(a.length==0){alert("\u8bf7\u52fe\u9009\u79fb\u5165\u6536\u85cf");return false}l.showMsgBox("",a.join(","),f);this.closeWin()};